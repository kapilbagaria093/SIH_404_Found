version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - search_knowledge_base
  - report_issue
  - check_system_status
  - inform_urgency
  - chitchat
  - stop_form

entities:
  - application
  - search_topic
  - issue_description
  - urgency

slots:
  issue_description:
    type: text
    mappings:
    - type: from_entity
      entity: issue_description
  urgency:
    type: categorical
    values: [low, medium, high]
    mappings:
    - type: from_entity
      entity: urgency
  kb_steps:
    type: list
    mappings:
    - type: custom
  current_step_index:
    type: float
    min_value: 0.0
    max_value: 100.0
    mappings:
    - type: custom

responses:
  utter_greet:
  - text: "Hello! I'm the POWERGRID IT virtual assistant. I can help you find solutions, check system status, or create a ticket. What do you need?"
  utter_goodbye:
  - text: "Goodbye! Feel free to reach out if you need anything else."
  utter_ask_issue_description:
  - text: "Understood. To create a ticket, I need a brief description of the problem."
  utter_ask_urgency:
  - text: "Got it. How urgent is this issue? You can say low, medium, or high."
  utter_submit_ticket:
  - text: "Thank you. Your {urgency} priority ticket for '{issue_description}' has been successfully created with ID: {ticket_id}."
  utter_ticket_creation_failed:
  - text: "I'm sorry, I encountered an error and could not create your ticket. Please contact the IT helpdesk directly."
  utter_start_troubleshooting:
  - text: "I found a guide that might help. Let's try the first step:"
  utter_next_step:
  - text: "Okay, that didn't work. Let's try the next step:"
  utter_no_more_steps:
  - text: "We've run out of automated steps. I'm sorry I couldn't resolve the issue."
  utter_glad_it_helped:
  - text: "Excellent! I'm glad we could resolve your issue. Is there anything else I can help with today?"
  utter_offer_create_ticket:
  - text: "Would you like me to create a ticket for you so our team can investigate?"
  utter_no_solution_found:
  - text: "I couldn't find a guide for that topic in our knowledge base. Should I create a ticket for you?"
  utter_ok_no_ticket:
  - text: "Okay, I will not create a ticket. Let me know if you change your mind."
  utter_ask_urgency_invalid:
  - text: "My apologies, but urgency must be one of the following: low, medium, or high."
  # Fallback and Chit-Chat Responses
  utter_ask_rephrase:
  - text: "I'm sorry, I'm not sure how to help with that. Could you try rephrasing your request?"
  utter_chitchat/ask_how_are_you:
  - text: "I'm a bot, so I'm always running at 100%! How can I help you?"
  utter_chitchat/ask_who_are_you:
  - text: "I am the POWERGRID IT virtual assistant, designed to help you with your tech issues."
  utter_chitchat/handle_insult:
  - text: "I am programmed to be helpful. Let's focus on solving your IT issue."
  utter_chitchat/handle_thanks:
  - text: "You're welcome! That's what I'm here for."
  # Form Interruption Responses
  utter_stop_form_and_ask:
  - text: "Okay, I've paused the ticket creation process. What would you like to do instead?"
  utter_ask_continue_form:
  - text: "Would you like to continue creating your ticket?"

actions:
- action_check_status
- action_interactive_kb_search
- action_troubleshooting_followup
- validate_ticket_form
- action_default_fallback

forms:
  ticket_form:
    required_slots:
      - issue_description
      - urgency
